
<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<meta name="template" content="Vijeo_template.htt">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="date" content="08 9, 2003 11:54:23 AM">
<meta name="topic-status" content="In Progress">
<meta name="topic-priority" content="0">
<meta name="topic-time-estimate" content="0">
<meta name="topic-comment" content="">
<meta name="topic-id" content="Limitations.htm">
<meta name="window-type" content="$global_NewWindow">
 <meta name="generator" content="Adobe RoboHelp 10">
<title>Points clés</title>
<link rel="StyleSheet" href="TIS-STYL.CSS" type="text/css">
</head>
<body>
<script type="text/javascript" src="ehlpdhtm.js" language="JavaScript1.2"></script>




<div style="width: 100%; position: relative;" id="header">
	<table style="background-attachment: scroll; margin-left: 0px; margin-right: 4px; 
			 background-image: url(top_banner.bmp); background-repeat: Repeat-X; 
			 line-height: 0pt; vertical-align: top;" cellspacing="0" width="100%" 
			 background="top_banner.bmp">
		<col style="width: 90%;">
		<col style="width: 5%;">
		<col style="width: 5%;">
		<tr style="vertical-align: center; height: 39px;">
			<td style="width: 90%; padding-right: 10px; padding-left: 10px; 
				 border-right-color: #000000;">
   <p><img src="logo.bmp" style="border: none;" alt="" width="37" height="37" border="0"></p></td>
			<td style="width: 5%; padding-right: 0px; padding-left: 10px; 
				 border-right-color: #000000;">
   <p style="text-align: center;"><a 
			 title="Glossary" href="Appendix.chm::/Glossary.htm"><img src="logo_glossary.bmp" style="border: none;" alt="" width="47" height="37" border="0"></a></p></td>
			<td style="width: 5%; padding-right: 10px; padding-left: 5px; 
				 border-right-color: #000000;">
   <p style="text-align: center;"><a 
			 href="About.chm::/What_is_Vijeo-Designer.htm" title="Home"><img src="logo_home.bmp" alt="Home" title="Home" style="border: none; 
			 margin-left: 0px; margin-right: 0px; margin-bottom: 0px; margin-top: -2px;" width="47" height="37" border="0"></a></p></td>
		</tr>
	</table>
</div>

<h2>18.3.4 Points clés</h2>
<p>Notez bien les points clés suivants lors de l'écriture de scripts :</p>
<p>&#160;</p>
<h3>Situations dangereuses</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">N'utilisez pas les scripts dans des applications qui peuvent toucher la vie humaine ou dans d'autres scénarios qui peuvent être considérés comme étant dangereux.</p>
</li>
</ul>
<h3>&#160;</h3>
<h3>Tableaux String, StringBuffer et Java Primitive</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Ne créez pas d'objets String ou StringBuffer, ni de tableaux primitifs Java occupant un espace mémoire volumineux. Par exemple, si vous écrivez le script suivant, beaucoup d'espace mémoire est occupé et peut causer l'interruption des opérations par Vijeo-Designer Runtime.</p>
</li>
</ul>
<p class="Code" style="margin-left: 80px;">int a[] = new int[30000]; <span style="color: #008000;">// Occupe 120 Ko dans la mémoire</span></p>
<p class="Bullet">&#160;</p>
<h3>Accéder aux éléments dans des tableaux</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Evitez l'accès indirect aux éléments dans des variables Tableau Vijeo Designer.</p>
</li>
</ul>

<p class="Code" style="margin-left: 80px;">int a = 10;</p>

<p class="code" style="margin-left: 80px;">Array01[a].getIntValue(); <span style="color: #008000;">// Evitez des éléments de tableau indirects</span></p>
<p class="code" style="margin-left: 80px; color: #008000;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Ceci charge la variable Vijeo-Designer</p>
<p class="code" style="margin-left: 80px; color: #008000;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// dans la mémoire</p>
<p class="code" style="margin-left: 80px;">&#160;</p>
<p class="Bullet" style="margin-left: 40px;">Lorsque vous accédez aux éléments de façon indirecte dans des variables Tableau Vijeo-Designer, le tableau au complet est chargé dans la mémoire. Si le tableau est très grand (p. ex. : 1 000 éléments), le tableau occupera un grand nombre de mémoire et forcera la machine cible de se ralentir.</p>
<p class="Bullet" style="margin-left: 40px;">Pour éviter ce problème de mémoire, utilisez une constante pour définir l'élément de tableau.</p>
<p class="code" style="margin-left: 80px;">Array01[10].getIntValue();<span style="color: #008000;">// Valeur constante pour l'élément de tableau</span></p>
<p class="Bullet">&#160;</p>
<h3>Fréquence et planification des actions</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Les actions configurées avec la même fréquence et la même programmation s'exécutent dans la même unité d'exécution.</p>
</li>
</ul>
<p class="Bullet" style="margin-left: 40px;">Par exemple, si un projet contient 5 actions avec les propriétés suivantes :</p>
<table style="vertical-align: top; margin-left: 40px;" cellspacing="0">
<col width="145">
<col width="145">
<col width="145">
<col width="145">
<col width="145">
<col width="145">
<tr style="vertical-align: top;">
<td style="border-top: Solid 3px #000000; border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Nom</p>
</td>
<td style="border-top: Solid 3px #000000; border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Action01</p>
</td>
<td style="border-top: Solid 3px #000000; border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Action02</p>
</td>
<td style="border-top: Solid 3px #000000; border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Action03</p>
</td>
<td style="border-top: Solid 3px #000000; border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Action04</p>
</td>
<td style="border-top: Solid 3px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#91AFD9" width="145">
<p class="Tabletitle">Action05</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#CBD9ED" width="145">
<p class="TableDefinitions">Déclenchement</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Périodique</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Périodique</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Périodique</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Périodique</p>
</td>
<td style="border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Périodique</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#CBD9ED" width="145">
<p class="TableDefinitions">Fréquence</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">1.0</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">1.0</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">1.0</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">2.0</p>
</td>
<td style="border-bottom: Solid 1px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">2.0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-right: Solid 1px #000000; border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" bgcolor="#CBD9ED" width="145">
<p class="TableDefinitions">Programmation</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Surveillé</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Surveillé</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Normal</p>
</td>
<td style="border-right: Solid 1px #000000; border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Normal</p>
</td>
<td style="border-bottom: Solid 3px #000000; padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;" width="145">
<p class="Tabletext">Normal</p>
</td>
</tr>
</table>
<p class="Bullet" style="margin-left: 40px; margin-top: 9pt;">Un total de 3 unités d'exécution sont créées lors du runtime.</p>
<p class="Bullet" style="margin-left: 40px; margin-top: 0pt;">1. Action01 et Action02 s'exécutent dans la même unité d'exécution parce que leur fréquence et leur planification sont les mêmes.<br>
2. Action03 s'exécute dans une unité d'exécution distincte car sa planification est différente de celle des scripts dans Thread1 et la fréquence est différente de celle des scripts dans Thread3.<br>
3. Action04 et Action05 s'exécutent dans la même unité d'exécution car leur fréquence et leur planification sont les mêmes.</p>
<p class="NoteImage" style="margin-left: 40px;"><img src="Limit.bmp" style="border: none;" alt="" width="77" height="24" border="0"></p>
<ul>
<li class="p-NoteText2">
<p class="NoteText2">Lorsque actions s'exécutent dans la même unité d'exécution, un délai dans l'un de ces scripts retardent tous les scripts.</p>
</li>
</ul>
<ul>
<li class="p-Bullet">
<p class="Bullet">Lorsque vous utilisez des scripts dans les actions, assurez-vous de ne pas configurer un type de déclenchement qui fait exécuter le script à plusieurs reprises comme une boucle infinie. Par exemple, un script qui est déclenché pour exécution immédiate peut arrêter la communication avec certaines machines cibles après son exécution.</p>
</li>
</ul>
<h3>&#160;</h3>
<h3>Boucles</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Lorsque vous utilisez des boucles (do-while, for, while), veillez à ne pas créer une boucle infinie. Les boucles sans fin, impossibles à détecter lors de la validation, peuvent causer un blocage fatal de la machine cible étant donné que le script utilise toujours plus de mémoire.</p>
</li>
<li class="p-Bullet">
<p class="Bullet">Lorsque vous utilisez des boucles (do-while, for, while), et que le script ne se termine pas dans un délai opportun, le système terminera le script de façon abrupte. Les scripts du type Appui, comme les scripts d'animation sur appui et d'action sur appui, se terminent dans deux secondes. Les scripts du type Evénement, comme les scripts Au démarrage et Conditionnel, se terminent dans cinq secondes.</p>
</li>
</ul>
<h3>&#160;</h3>
<h3>Valeurs NULLES</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Certaines méthodes de script Vijeo Designer et méthodes Java peuvent retourner des valeurs NULLES. Vous devez tenir compte de cette possibilité. Dans vos scripts, incluez le code pour vérifier les valeurs retournées et pour tenir compte des valeurs NULLES.</p>
</li>
</ul>
<h3>&#160;</h3>
<h3>Compatibilité de la langue Java avec les scripts Vijeo Designer</h3>
<ul>
<li class="p-Bullet">
<p class="Bullet">Le langage de script Vijeo-Designer est basé sur le langage de programmation Java. Par la suite, vous ne pouvez pas utiliser les mots clés Java comme noms d'objet ou de script. De plus, d'autres règles de syntaxe Java s'appliquent.</p>
</li>
</ul>
<ul>
<li class="p-bullet2">
<p class="bullet2">Le langage de script Vijeo-Designer est sensible à la casse. Cela comprend : les noms d'objet Vijeo-Designer, les noms de variable, les appels de méthode, les mots clés, et ainsi de suite. Cela signifie que <span style="font-weight: bold; font-family: 'Courier New', monospace;">Int01</span> n'est pas le même que <span style="font-weight: bold; font-family: 'Courier New', monospace;">int01</span> et <span style="font-weight: bold; font-family: 'Courier New', monospace;">Int01.getIntValue()</span> n'est pas le même que <span style="font-weight: bold; font-family: 'Courier New', monospace;">Int01.getintvalue()</span>.</p>
</li>
</ul>
<ol>
<li style="list-style:none;display: inline">
<ul>
<li class="p-Bullet">
<p class="Bullet">Lorsque vous travaillez avec des nombres décimaux, saisissez <span style="font-weight: bold;">0.1234</span> (pas <span style="font-weight: bold;">.1234</span>).</p>
</li>
<li class="p-Bullet">
<p class="Bullet">Lorsque vous travaillez avec des nombres décimaux, saisissez un point [ <span style="font-weight: bold;">.</span> ] pour indiquer un point décimal <span style="font-weight: bold;">0.1234</span>. D'autres méthodes pour indiquer un point décimal, comme la virgule [ <span style="font-weight: bold;">,</span> ] qui est utilisée dans plusieurs pays européens, ne sont pas acceptées. En d'autres mots, la valeur <span style="font-weight: bold;">0,1234</span> ne sera pas validée.</p>
</li>
<li class="p-Bullet">
<p class="Bullet">Les variables de script locales doivent être initialisées avant de pouvoir les utiliser dans le script, plus particulièrement lorsqu'elles sont utilisées pour une comparaison. Même si la variable est considérée comme étant 0, vous devez affecter une valeur de 0 à la valeur avant de pouvoir l'utiliser. Sinon, la génération de l'application utilisateur peut échouer.</p>
</li>
</ul>
</li>
</ol>
<p class="Code" style="margin-left: 120px;">integer a, b=0; <span style="color: #008000;">// a n'est pas initialisée</span></p>
<p class="Code" style="margin-left: 120px;">if ( a==0 ) &#160;&#160;&#160;&#160;<span style="color: #008000;">// génération pas possible</span></p>
<p class="Code" style="margin-left: 120px;">if ( b==0 ) &#160;&#160;&#160;&#160;<span style="color: #008000;">// génération réussie</span></p>
<ul>
<li style="list-style:none;display: inline">
<ul>
<li class="p-Bullet">
<p class="Bullet">Les points-virgules marquent la fin des états. Encadrez les expressions de parenthèses.</p>
</li>
<li class="p-Bullet">
<p class="Bullet">L'affectation des valeurs d'un type de données à un autre peut causer la perte de données. Les scripts Vijeo-Designer empêcheront cela à moins que vous modifiez les valeurs.</p>
</li>
</ul>
</li>
</ul>

<p class="Code" style="margin-left: 120px;">int c = 0; double d = 0.0;</p>

<p class="Code" style="margin-left: 120px;">c = d; &#160;&#160;&#160;&#160;&#160;<span style="color: #008000;">// impossible de valider</span></p>
<p class="Code" style="margin-left: 120px;">c = (int)d; <span style="color: #008000;">// validation réussie</span></p>
<p class="Code" style="margin-left: 120px;">&#160;</p>
<p style="margin-left: 80px;">Dans les scripts, les valeurs fractionnelles sont du type double. Par la suite, si vous utilisez les floats, modifiez les valeurs fractionnelles affectées à un float.</p>
<p class="Code" style="margin-left: 120px;">float a = 0.0; &#160;&#160;&#160;&#160;&#160;&#160;&#160;<span style="color: #008000;">// impossible de valider</span></p>
<p class="Code" style="margin-left: 120px;">float b = (float)0.0; <span style="color: #008000;">// validation réussie</span></p>
<ul>
<li class="p-bullet2">
<p class="bullet2">Les valeurs fractionnelles dans les scripts prennent en charge la précision double; les variables Vijeo-Designer prennent en charge la précision unique. Lors de l'écriture d'une précision double vers une variable Vijeo-Designer du type REAL, en coulisse, le script modifie le type de la valeur en une variable float, ce qui peut causer la perte de données et de précision.</p>
</li>
</ul>

<p class="Code" style="margin-left: 120px;">double d = Math.sin(90);</p>

<p class="Code" style="margin-left: 120px;">Float01.write( d );</p>

<p class="Code" style="margin-left: 120px; color: #008000;">// d est modifié</p>
<p class="Code" style="margin-left: 120px;"><span style="color: #008000;">// REAL01.write( float(d) );</span></p>
<ul>
<li class="p-bullet2">
<p class="bullet2">La taille maximale des objets Java est de 64 Ko. Par la suite, des immenses scripts (comme 1 000+ lignes) débordera la pile et l'application échouera.</p>
</li>
</ul>
</body>
</html>
